<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>학생 관리 시스템</title>
    <script>
        window.onload = function() {
            document.getElementById("btnGetStudents").addEventListener("click", getStudents);
            document.getElementById("btnGetCourses").addEventListener("click", getCourses);
            document.getElementById("btnGetEnrollments").addEventListener("click", getEnrollments);
            document.getElementById("btnGetProfessors").addEventListener("click", getProfessors);
        }

        function getStudents() {
              const xhr = new XMLHttpRequest();
              xhr.open("GET", "http://localhost:3000/students"); // 학생 목록 URL
              xhr.onload = function() {
                  if (xhr.status === 200) {
                      const res = JSON.parse(xhr.response);
                      displayData(res.students, "studentContents");
                  } else {
                      console.error("Error fetching students: ", xhr.statusText);
                  }
              };
              xhr.send();
          }

          function getCourses() {
              const xhr = new XMLHttpRequest();
              xhr.open("GET", "http://localhost:3000/courses"); // 강의 목록 URL
              xhr.onload = function() {
                  if (xhr.status === 200) {
                      const res = JSON.parse(xhr.response);
                      displayData(res.courses, "courseContents");
                  } else {
                      console.error("Error fetching courses: ", xhr.statusText);
                  }
              };
              xhr.send();
          }

          function getEnrollments() {
              const xhr = new XMLHttpRequest();
              xhr.open("GET", "http://localhost:3000/enrollments"); // 수강 목록 URL
              xhr.onload = function() {
                  if (xhr.status === 200) {
                      const res = JSON.parse(xhr.response);
                      displayData(res.enrollments, "enrollmentContents");
                  } else {
                      console.error("Error fetching enrollments: ", xhr.statusText);
                  }
              };
              xhr.send();
          }

          function getProfessors() {
              const xhr = new XMLHttpRequest();
              xhr.open("GET", "http://localhost:3000/professors"); // 교수 목록 URL
              xhr.onload = function() {
                  if (xhr.status === 200) {
                      const res = JSON.parse(xhr.response);
                      displayData(res.professors, "professorContents");
                  } else {
                      console.error("Error fetching professors: ", xhr.statusText);
                  }
              };
              xhr.send();
          }


        function displayData(data, elementId) {
            const contents = document.getElementById(elementId);
            contents.innerHTML = ""; // 기존 내용 삭제
            data.forEach(item => {
                let itemHTML = "<div style='margin: 5px; border: 1px solid #ccc; padding: 10px; border-radius: 5px;'>";
                for (const key in item) {
                    itemHTML += `<strong>${key}:</strong> ${item[key]}<br>`;
                }
                itemHTML += "</div>";
                contents.innerHTML += itemHTML;
            });
        }
    </script>
</head>
<body>
    <h1>학생 관리 시스템</h1>
    <button id="btnGetStudents">학생 목록 가져오기</button>
    <div id="studentContents" style="border: 1px solid #000; margin: 10px; padding: 10px;"></div>

    <button id="btnGetCourses">강의 목록 가져오기</button>
    <div id="courseContents" style="border: 1px solid #000; margin: 10px; padding: 10px;"></div>

    <button id="btnGetEnrollments">수강 목록 가져오기</button>
    <div id="enrollmentContents" style="border: 1px solid #000; margin: 10px; padding: 10px;"></div>

    <button id="btnGetProfessors">교수 목록 가져오기</button>
    <div id="professorContents" style="border: 1px solid #000; margin: 10px; padding: 10px;"></div>
</body>
</html>
